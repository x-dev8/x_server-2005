/********************************************************************
	Created by UIEditor.exe
	FileName: E:\Document\技能\SkillProduce.h
*********************************************************************/
#pragma once
#include "MeUi/MeUi.h"
#include "NpcCoord.h"
#include "UiBase.h"

#ifndef ID_FRAME_SkillProduce
#define ID_FRAME_SkillProduce		"ID_FRAME_SkillProduce"
#endif  ID_FRAME_SkillProduce
#ifndef ID_LISTIMG_Skill1
#define ID_LISTIMG_Skill1		"ID_LISTIMG_Skill1"
#endif  ID_LISTIMG_Skill1
#ifndef ID_LISTIMG_Skill2
#define ID_LISTIMG_Skill2		"ID_LISTIMG_Skill2"
#endif  ID_LISTIMG_Skill2
#ifndef ID_LISTIMG_Skill3
#define ID_LISTIMG_Skill3		"ID_LISTIMG_Skill3"
#endif  ID_LISTIMG_Skill3
#ifndef ID_LISTIMG_Skill4
#define ID_LISTIMG_Skill4		"ID_LISTIMG_Skill4"
#endif  ID_LISTIMG_Skill4
#ifndef ID_LISTIMG_Skill5
#define ID_LISTIMG_Skill5		"ID_LISTIMG_Skill5"
#endif  ID_LISTIMG_Skill5
#ifndef ID_LISTIMG_Skill6
#define ID_LISTIMG_Skill6		"ID_LISTIMG_Skill6"
#endif  ID_LISTIMG_Skill6
#ifndef ID_LIST_Npc1
#define ID_LIST_Npc1		"ID_LIST_Npc1"
#endif  ID_LIST_Npc1
#ifndef ID_LIST_Npc2
#define ID_LIST_Npc2		"ID_LIST_Npc2"
#endif  ID_LIST_Npc2
#ifndef ID_LIST_Npc3
#define ID_LIST_Npc3		"ID_LIST_Npc3"
#endif  ID_LIST_Npc3
#ifndef ID_LIST_Npc4
#define ID_LIST_Npc4		"ID_LIST_Npc4"
#endif  ID_LIST_Npc4
#ifndef ID_LIST_Npc5
#define ID_LIST_Npc5		"ID_LIST_Npc5"
#endif  ID_LIST_Npc5
#ifndef ID_LIST_Npc6
#define ID_LIST_Npc6		"ID_LIST_Npc6"
#endif  ID_LIST_Npc6
#ifndef ID_TEXT_SkillName1
#define ID_TEXT_SkillName1		"ID_TEXT_SkillName1"
#endif  ID_TEXT_SkillName1
#ifndef ID_TEXT_SkillName2
#define ID_TEXT_SkillName2		"ID_TEXT_SkillName2"
#endif  ID_TEXT_SkillName2
#ifndef ID_TEXT_SkillName3
#define ID_TEXT_SkillName3		"ID_TEXT_SkillName3"
#endif  ID_TEXT_SkillName3
#ifndef ID_TEXT_SkillName4
#define ID_TEXT_SkillName4		"ID_TEXT_SkillName4"
#endif  ID_TEXT_SkillName4
#ifndef ID_TEXT_SkillName5
#define ID_TEXT_SkillName5		"ID_TEXT_SkillName5"
#endif  ID_TEXT_SkillName5
#ifndef ID_TEXT_SkillName6
#define ID_TEXT_SkillName6		"ID_TEXT_SkillName6"
#endif  ID_TEXT_SkillName6
#ifndef ID_TEXT_SkillLvl1
#define ID_TEXT_SkillLvl1		"ID_TEXT_SkillLvl1"
#endif  ID_TEXT_SkillLvl1
#ifndef ID_TEXT_SkillLvl2
#define ID_TEXT_SkillLvl2		"ID_TEXT_SkillLvl2"
#endif  ID_TEXT_SkillLvl2
#ifndef ID_TEXT_SkillLvl3
#define ID_TEXT_SkillLvl3		"ID_TEXT_SkillLvl3"
#endif  ID_TEXT_SkillLvl3
#ifndef ID_TEXT_SkillLvl4
#define ID_TEXT_SkillLvl4		"ID_TEXT_SkillLvl4"
#endif  ID_TEXT_SkillLvl4
#ifndef ID_TEXT_SkillLvl5
#define ID_TEXT_SkillLvl5		"ID_TEXT_SkillLvl5"
#endif  ID_TEXT_SkillLvl5
#ifndef ID_TEXT_SkillLvl6
#define ID_TEXT_SkillLvl6		"ID_TEXT_SkillLvl6"
#endif  ID_TEXT_SkillLvl6

#ifndef ID_TEXT_SkillNum1
#define ID_TEXT_SkillNum1		"ID_TEXT_SkillNum1"
#endif  ID_TEXT_SkillNum1
#ifndef ID_TEXT_SkillNum2
#define ID_TEXT_SkillNum2		"ID_TEXT_SkillNum2"
#endif  ID_TEXT_SkillNum2
#ifndef ID_TEXT_SkillNum3
#define ID_TEXT_SkillNum3		"ID_TEXT_SkillNum3"
#endif  ID_TEXT_SkillNum3
#ifndef ID_TEXT_SkillNum4
#define ID_TEXT_SkillNum4		"ID_TEXT_SkillNum4"
#endif  ID_TEXT_SkillNum4
#ifndef ID_TEXT_SkillNum5
#define ID_TEXT_SkillNum5		"ID_TEXT_SkillNum5"
#endif  ID_TEXT_SkillNum5
#ifndef ID_TEXT_SkillNum6
#define ID_TEXT_SkillNum6		"ID_TEXT_SkillNum6"
#endif  ID_TEXT_SkillNum6


#ifndef ID_PICTURE_SkillNum1
#define ID_PICTURE_SkillNum1		"ID_PICTURE_SkillNum1"
#endif  ID_PICTURE_SkillNum1
#ifndef ID_PICTURE_SkillNum2
#define ID_PICTURE_SkillNum2		"ID_PICTURE_SkillNum2"
#endif  ID_PICTURE_SkillNum2
#ifndef ID_PICTURE_SkillNum3
#define ID_PICTURE_SkillNum3		"ID_PICTURE_SkillNum3"
#endif  ID_PICTURE_SkillNum3
#ifndef ID_PICTURE_SkillNum4
#define ID_PICTURE_SkillNum4		"ID_PICTURE_SkillNum4"
#endif  ID_PICTURE_SkillNum4
#ifndef ID_PICTURE_SkillNum5
#define ID_PICTURE_SkillNum5		"ID_PICTURE_SkillNum5"
#endif  ID_PICTURE_SkillNum5
#ifndef ID_PICTURE_SkillNum6
#define ID_PICTURE_SkillNum6		"ID_PICTURE_SkillNum6"
#endif  ID_PICTURE_SkillNum6
#ifndef ID_PROGRESS_Roll1
#define ID_PROGRESS_Roll1		"ID_PROGRESS_Roll1"
#endif  ID_PROGRESS_Roll1
#ifndef ID_PROGRESS_Roll2
#define ID_PROGRESS_Roll2		"ID_PROGRESS_Roll2"
#endif  ID_PROGRESS_Roll2
#ifndef ID_PROGRESS_Roll3
#define ID_PROGRESS_Roll3		"ID_PROGRESS_Roll3"
#endif  ID_PROGRESS_Roll3
#ifndef ID_PROGRESS_Roll4
#define ID_PROGRESS_Roll4		"ID_PROGRESS_Roll4"
#endif  ID_PROGRESS_Roll4
#ifndef ID_PROGRESS_Roll5
#define ID_PROGRESS_Roll5		"ID_PROGRESS_Roll5"
#endif  ID_PROGRESS_Roll5
#ifndef ID_PROGRESS_Roll6
#define ID_PROGRESS_Roll6		"ID_PROGRESS_Roll6"
#endif  ID_PROGRESS_Roll6
#ifndef ID_TEXT_HuoLi
#define ID_TEXT_HuoLi		"ID_TEXT_HuoLi"
#endif  ID_TEXT_HuoLi
// 为以后增加生产技能时准备
//#ifndef ID_BUTTON_Back
//#define ID_BUTTON_Back		"ID_BUTTON_Back"
//#endif  ID_BUTTON_Back
//#ifndef ID_BUTTON_Next
//#define ID_BUTTON_Next		"ID_BUTTON_Next"
//#endif  ID_BUTTON_Next

#define SKILL_PRODUCE_NUM   9
#define ICON_PERPAGE	    6

class CUI_ID_FRAME_SkillProduce :public CUIBase
{
public:
    struct ProduceSkillData
    {
        ControlGroup    kControlGroup;
        int             iSkillId;
        int             kSkillPointType;
        unsigned short  usSkillLevel;
    };

private:
    ControlFrame*	    m_pID_FRAME_SkillProduce;
    ControlText*	    m_pID_TEXT_HuoLi;

    //ControlButton*	    m_pID_BUTTON_Back;
    //ControlButton*	    m_pID_BUTTON_Next;

    ControlListImage*	m_pID_LISTIMG_Skill[ICON_PERPAGE];
    ControlList*	    m_pID_LIST_Npc[ICON_PERPAGE];
    ControlText*	    m_pID_TEXT_SkillName[ICON_PERPAGE];
    ControlText*	    m_pID_TEXT_SkillLvl[ICON_PERPAGE];
    ControlText*	    m_pID_TEXT_SkillNum[ICON_PERPAGE];
    ControlPicture*     m_pID_PICTURE_SkillNum[ICON_PERPAGE];
    ControlProgress*	m_pID_PROGRESS_SkillValue[ICON_PERPAGE];
     
public:	
	CUI_ID_FRAME_SkillProduce();

    bool OnFrameRun();
	bool OnFrameRender();
	bool ID_LISTIMG_Skill1OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill2OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill3OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
    bool ID_LISTIMG_Skill4OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
    bool ID_LISTIMG_Skill5OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
    bool ID_LISTIMG_Skill6OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );

	bool ID_LISTIMG_Skill1OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill2OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill3OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill4OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill5OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_Skill6OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
// 	bool ID_BUTTON_BackOnButtonClick( ControlObject* pSender );
// 	bool ID_BUTTON_NextOnButtonClick( ControlObject* pSender );

public:
    ControlFrame*   GetFrame() { return m_pID_FRAME_SkillProduce; }
    void            Update();
    void            Refresh();
    virtual void    InitializeAtEnterWorld();
    void            ShowRecipeById( int nId );  // 显示生活技能
    bool            IsRecipeSkillList( const ControlObject* pObject );

private:
    static  void    NPC_HyberOtherClick( ControlObject* pSender, const std::string& content ,int nId );
    void            ResetMembers();
	virtual bool    _LoadUI();				// 载入UI
	bool            DoControlConnect();	    // 关连控件
	virtual bool    _UnLoadUI();			// 卸载UI
	virtual bool    _IsVisable();			// 是否可见
	virtual void    _SetVisable( const bool bVisable );			// 设置是否可视
    
    void            ShowPage(int nPageNo);						            // 显示第几页
    void            AddSkillToGroup(int nIndex, int iSkillId, int iSkillPoint);
    void            FillMapPosTip(const NpcCoordInfo* pNpcInfo, ControlList::S_List* pList );
    void            OnIconClick( int nIconIndex );
    void            RefreshPageButton();

private:
    ProduceSkillData    m_ProduceSkill[ICON_PERPAGE];
	unsigned char		m_ucPageNum;
	unsigned char		m_ucCurPage;
	unsigned char		m_ucCurPageSkillNum;		            // 当前页技能个数
    bool                m_bInited;
};

extern CUI_ID_FRAME_SkillProduce s_CUI_ID_FRAME_SkillProduce;
