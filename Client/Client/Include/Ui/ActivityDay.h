/********************************************************************
	Created by UIEditor.exe
	FileName: C:\Documents and Settings\zhuomeng.hu\×ÀÃæ\ActivityDay.h
*********************************************************************/
#pragma once
#include "MeUi/MeUi.h"
#include "UIBase.h"
#include "ActivityList.h"

#ifndef ID_FRAME_ActivityDay
#define ID_FRAME_ActivityDay		"ID_FRAME_ActivityDay"
#endif  ID_FRAME_ActivityDay
#ifndef ID_BUTTON_CLOSE
#define ID_BUTTON_CLOSE		"ID_BUTTON_CLOSE"
#endif  ID_BUTTON_CLOSE
#ifndef ID_TEXT_Desc1
#define ID_TEXT_Desc1		"ID_TEXT_Desc1"
#endif  ID_TEXT_Desc1
#ifndef ID_TEXT_Page
#define ID_TEXT_Page		"ID_TEXT_Page"
#endif  ID_TEXT_Page
#ifndef ID_LISTIMG_Award1
#define ID_LISTIMG_Award1		"ID_LISTIMG_Award1"
#endif  ID_LISTIMG_Award1
#ifndef ID_TEXT_Name1
#define ID_TEXT_Name1		"ID_TEXT_Name1"
#endif  ID_TEXT_Name1
#ifndef ID_TEXT_Name2
#define ID_TEXT_Name2		"ID_TEXT_Name2"
#endif  ID_TEXT_Name2
#ifndef ID_TEXT_Name3
#define ID_TEXT_Name3		"ID_TEXT_Name3"
#endif  ID_TEXT_Name3
#ifndef ID_TEXT_Name4
#define ID_TEXT_Name4		"ID_TEXT_Name4"
#endif  ID_TEXT_Name4
#ifndef ID_TEXT_Name5
#define ID_TEXT_Name5		"ID_TEXT_Name5"
#endif  ID_TEXT_Name5
#ifndef ID_CHECKBOX_Activity
#define ID_CHECKBOX_Activity		"ID_CHECKBOX_Activity"
#endif  ID_CHECKBOX_Activity
#ifndef ID_BUTTON_See1
#define ID_BUTTON_See1		"ID_BUTTON_See1"
#endif  ID_BUTTON_See1
#ifndef ID_CHECKBOX_UnderGround
#define ID_CHECKBOX_UnderGround		"ID_CHECKBOX_UnderGround"
#endif  ID_CHECKBOX_UnderGround
#ifndef ID_CHECKBOX_Country
#define ID_CHECKBOX_Country		"ID_CHECKBOX_Country"
#endif  ID_CHECKBOX_Country
#ifndef ID_CHECKBOX_Guild
#define ID_CHECKBOX_Guild		"ID_CHECKBOX_Guild"
#endif  ID_CHECKBOX_Guild
#ifndef ID_CHECKBOX_Money
#define ID_CHECKBOX_Money		"ID_CHECKBOX_Money"
#endif  ID_CHECKBOX_Money
#ifndef ID_CHECKBOX_Quest
#define ID_CHECKBOX_Quest		"ID_CHECKBOX_Quest"
#endif  ID_CHECKBOX_Quest
#ifndef ID_CHECKBOX_Official
#define ID_CHECKBOX_Official		"ID_CHECKBOX_Official"
#endif  ID_CHECKBOX_Official
#ifndef ID_LISTIMG_Icon1
#define ID_LISTIMG_Icon1		"ID_LISTIMG_Icon1"
#endif  ID_LISTIMG_Icon1
#ifndef ID_LISTIMG_Icon2
#define ID_LISTIMG_Icon2		"ID_LISTIMG_Icon2"
#endif  ID_LISTIMG_Icon2
#ifndef ID_LISTIMG_Icon3
#define ID_LISTIMG_Icon3		"ID_LISTIMG_Icon3"
#endif  ID_LISTIMG_Icon3
#ifndef ID_TEXT_Count1
#define ID_TEXT_Count1		"ID_TEXT_Count1"
#endif  ID_TEXT_Count1
#ifndef ID_TEXT_Count2
#define ID_TEXT_Count2		"ID_TEXT_Count2"
#endif  ID_TEXT_Count2
#ifndef ID_TEXT_Count3
#define ID_TEXT_Count3		"ID_TEXT_Count3"
#endif  ID_TEXT_Count3
#ifndef ID_TEXT_Time1
#define ID_TEXT_Time1		"ID_TEXT_Time1"
#endif  ID_TEXT_Time1
#ifndef ID_TEXT_Time2
#define ID_TEXT_Time2		"ID_TEXT_Time2"
#endif  ID_TEXT_Time2
#ifndef ID_TEXT_Time3
#define ID_TEXT_Time3		"ID_TEXT_Time3"
#endif  ID_TEXT_Time3
#ifndef ID_TEXT_Time4
#define ID_TEXT_Time4		"ID_TEXT_Time4"
#endif  ID_TEXT_Time4
#ifndef ID_TEXT_Time5
#define ID_TEXT_Time5		"ID_TEXT_Time5"
#endif  ID_TEXT_Time5
#ifndef ID_TEXT_Desc2
#define ID_TEXT_Desc2		"ID_TEXT_Desc2"
#endif  ID_TEXT_Desc2
#ifndef ID_TEXT_Desc3
#define ID_TEXT_Desc3		"ID_TEXT_Desc3"
#endif  ID_TEXT_Desc3
#ifndef ID_LISTIMG_Award2
#define ID_LISTIMG_Award2		"ID_LISTIMG_Award2"
#endif  ID_LISTIMG_Award2
#ifndef ID_LISTIMG_Award3
#define ID_LISTIMG_Award3		"ID_LISTIMG_Award3"
#endif  ID_LISTIMG_Award3
#ifndef ID_PICTURE_Recommend1Star1
#define ID_PICTURE_Recommend1Star1		"ID_PICTURE_Recommend1Star1"
#endif  ID_PICTURE_Recommend1Star1
#ifndef ID_PICTURE_Recommend1Star2
#define ID_PICTURE_Recommend1Star2		"ID_PICTURE_Recommend1Star2"
#endif  ID_PICTURE_Recommend1Star2
#ifndef ID_PICTURE_Recommend1Star3
#define ID_PICTURE_Recommend1Star3		"ID_PICTURE_Recommend1Star3"
#endif  ID_PICTURE_Recommend1Star3
#ifndef ID_PICTURE_Recommend1Star4
#define ID_PICTURE_Recommend1Star4		"ID_PICTURE_Recommend1Star4"
#endif  ID_PICTURE_Recommend1Star4
#ifndef ID_PICTURE_Recommend1Star5
#define ID_PICTURE_Recommend1Star5		"ID_PICTURE_Recommend1Star5"
#endif  ID_PICTURE_Recommend1Star5
#ifndef ID_PICTURE_Recommend2Star1
#define ID_PICTURE_Recommend2Star1		"ID_PICTURE_Recommend2Star1"
#endif  ID_PICTURE_Recommend2Star1
#ifndef ID_PICTURE_Recommend2Star2
#define ID_PICTURE_Recommend2Star2		"ID_PICTURE_Recommend2Star2"
#endif  ID_PICTURE_Recommend2Star2
#ifndef ID_PICTURE_Recommend2Star3
#define ID_PICTURE_Recommend2Star3		"ID_PICTURE_Recommend2Star3"
#endif  ID_PICTURE_Recommend2Star3
#ifndef ID_PICTURE_Recommend2Star4
#define ID_PICTURE_Recommend2Star4		"ID_PICTURE_Recommend2Star4"
#endif  ID_PICTURE_Recommend2Star4
#ifndef ID_PICTURE_Recommend2Star5
#define ID_PICTURE_Recommend2Star5		"ID_PICTURE_Recommend2Star5"
#endif  ID_PICTURE_Recommend2Star5
#ifndef ID_PICTURE_Recommend3Star1
#define ID_PICTURE_Recommend3Star1		"ID_PICTURE_Recommend3Star1"
#endif  ID_PICTURE_Recommend3Star1
#ifndef ID_PICTURE_Recommend3Star2
#define ID_PICTURE_Recommend3Star2		"ID_PICTURE_Recommend3Star2"
#endif  ID_PICTURE_Recommend3Star2
#ifndef ID_PICTURE_Recommend3Star3
#define ID_PICTURE_Recommend3Star3		"ID_PICTURE_Recommend3Star3"
#endif  ID_PICTURE_Recommend3Star3
#ifndef ID_PICTURE_Recommend3Star4
#define ID_PICTURE_Recommend3Star4		"ID_PICTURE_Recommend3Star4"
#endif  ID_PICTURE_Recommend3Star4
#ifndef ID_PICTURE_Recommend3Star5
#define ID_PICTURE_Recommend3Star5		"ID_PICTURE_Recommend3Star5"
#endif  ID_PICTURE_Recommend3Star5
#ifndef ID_BUTTON_Go1
#define ID_BUTTON_Go1		"ID_BUTTON_Go1"
#endif  ID_BUTTON_Go1
#ifndef ID_BUTTON_See2
#define ID_BUTTON_See2		"ID_BUTTON_See2"
#endif  ID_BUTTON_See2
#ifndef ID_BUTTON_Go2
#define ID_BUTTON_Go2		"ID_BUTTON_Go2"
#endif  ID_BUTTON_Go2
#ifndef ID_BUTTON_See3
#define ID_BUTTON_See3		"ID_BUTTON_See3"
#endif  ID_BUTTON_See3
#ifndef ID_BUTTON_Go3
#define ID_BUTTON_Go3		"ID_BUTTON_Go3"
#endif  ID_BUTTON_Go3
#ifndef ID_BUTTON_WeekActivity
#define ID_BUTTON_WeekActivity		"ID_BUTTON_WeekActivity"
#endif  ID_BUTTON_WeekActivity
#ifndef ID_BUTTON_PageUp
#define ID_BUTTON_PageUp		"ID_BUTTON_PageUp"
#endif  ID_BUTTON_PageUp
#ifndef ID_BUTTON_PageDown
#define ID_BUTTON_PageDown		"ID_BUTTON_PageDown"
#endif  ID_BUTTON_PageDown
#ifndef ID_PICTURE_Bg1
#define ID_PICTURE_Bg1		"ID_PICTURE_Bg1"
#endif  ID_PICTURE_Bg1
#ifndef ID_PICTURE_Bg2
#define ID_PICTURE_Bg2		"ID_PICTURE_Bg2"
#endif  ID_PICTURE_Bg2
#ifndef ID_PICTURE_Bg3
#define ID_PICTURE_Bg3		"ID_PICTURE_Bg3"
#endif  ID_PICTURE_Bg3
#ifndef ID_TEXT_LV0
#define ID_TEXT_LV0		"ID_TEXT_LV0"
#endif  ID_TEXT_LV0
#ifndef ID_TEXT_LV1
#define ID_TEXT_LV1		"ID_TEXT_LV1"
#endif  ID_TEXT_LV1
#ifndef ID_TEXT_LV2
#define ID_TEXT_LV2		"ID_TEXT_LV2"
#endif  ID_TEXT_LV2
#ifndef ID_PROGRESS_Go1
#define ID_PROGRESS_Go1		"ID_PROGRESS_Go1"
#endif  ID_PROGRESS_Go1
#ifndef ID_PROGRESS_Go2
#define ID_PROGRESS_Go2		"ID_PROGRESS_Go2"
#endif  ID_PROGRESS_Go2
#ifndef ID_PROGRESS_Go3
#define ID_PROGRESS_Go3		"ID_PROGRESS_Go3"
#endif  ID_PROGRESS_Go3
#ifndef ID_PICTURE_Item1
#define ID_PICTURE_Item1		"ID_PICTURE_Item1"
#endif  ID_PICTURE_Item1
#ifndef ID_PICTURE_Item2
#define ID_PICTURE_Item2		"ID_PICTURE_Item2"
#endif  ID_PICTURE_Item2
#ifndef ID_PICTURE_Item3
#define ID_PICTURE_Item3		"ID_PICTURE_Item3"
#endif  ID_PICTURE_Item3
#ifndef ID_PICTURE_Item4
#define ID_PICTURE_Item4		"ID_PICTURE_Item4"
#endif  ID_PICTURE_Item4
#ifndef ID_PICTURE_Item5
#define ID_PICTURE_Item5		"ID_PICTURE_Item5"
#endif  ID_PICTURE_Item5

#ifndef ID_BUTTON_Last
#define ID_BUTTON_Last		"ID_BUTTON_Last"
#endif  ID_BUTTON_Last
#ifndef ID_BUTTON_Next
#define ID_BUTTON_Next		"ID_BUTTON_Next"
#endif  ID_BUTTON_Next
#ifndef ID_BUTTON_ActivityTrack
#define ID_BUTTON_ActivityTrack		"ID_BUTTON_ActivityTrack"
#endif  ID_BUTTON_ActivityTrack
#ifndef ID_CHECKBOX_ActivityDay
#define ID_CHECKBOX_ActivityDay		"ID_CHECKBOX_ActivityDay"
#endif  ID_CHECKBOX_ActivityDay
#ifndef ID_CHECKBOX_ActivityMonth
#define ID_CHECKBOX_ActivityMonth		"ID_CHECKBOX_ActivityMonth"
#endif  ID_CHECKBOX_ActivityMonth

#ifndef ID_TEXT_NPC
#define ID_TEXT_NPC		"ID_TEXT_NPC"
#endif  ID_TEXT_NPC
#ifndef ID_TEXT_TIME
#define ID_TEXT_TIME		"ID_TEXT_TIME"
#endif  ID_TEXT_TIME
#ifndef ID_TEXT_LX
#define ID_TEXT_LX		"ID_TEXT_LX"
#endif  ID_TEXT_LX

#ifndef ID_BUTTON_CKM
#define ID_BUTTON_CKM		"ID_BUTTON_CKM"
#endif  ID_BUTTON_CKM

#define ACT_NUM_PERPAGE     5
#define ACT_NUM_QUALITY     5

class CUI_ID_FRAME_ActivityDay : public CUIBase
{
public:
    enum TodayActType
    {
        ActType_None            = 0,

        ActType_Activity,
        ActType_Ectype,
        ActType_Country,
        ActType_Guild,
        ActType_Task,
        ActType_Salary,

        ActType_Max
    };

private:	
    ControlFrame*	    m_pID_FRAME_ActivityDay;
    ControlButton*	    m_pID_BUTTON_CLOSE;
    ControlButton*	    m_pID_BUTTON_WeekActivity;
    ControlButton*	    m_pID_BUTTON_PageUp;
    ControlButton*	    m_pID_BUTTON_PageDown;
	ControlButton*	    m_pID_BUTTON_Last;
	ControlButton*	    m_pID_BUTTON_Next;
    ControlText*	    m_pID_TEXT_Page;
	ControlButton*	    m_pID_BUTTON_ActivityTrack;

    ControlCheckBox*	m_pID_CHECKBOX_Activity;
    ControlCheckBox*	m_pID_CHECKBOX_UnderGround;
    ControlCheckBox*	m_pID_CHECKBOX_Country;
    ControlCheckBox*	m_pID_CHECKBOX_Guild;
    ControlCheckBox*	m_pID_CHECKBOX_Money;
    ControlCheckBox*	m_pID_CHECKBOX_Quest;
    ControlCheckBox*	m_pID_CHECKBOX_Official;

    ControlText*	    m_pID_TEXT_Name[ACT_NUM_PERPAGE];
    ControlText*	    m_pID_TEXT_Time[ACT_NUM_PERPAGE];
	ControlPicture*     m_pID_PICTURE_ActPic[ACT_NUM_PERPAGE];
    ControlPicture*	    m_pID_PICTURE_RecommendStar[ACT_NUM_QUALITY];  //ÐÇ¼¶

	ControlText*	    m_pID_TEXT_Count;
    ControlText*	    m_pID_TEXT_Desc;
    ControlText*        m_pID_TEXT_LV;
    ControlListImage*	m_pID_LISTIMG_Award;
	ControlCheckBox*	m_pID_CHECKBOX_ActivityDay;
	ControlCheckBox*	m_pID_CHECKBOX_ActivityMonth;

	ControlText*		m_pID_TEXT_NPC;
	ControlText*		m_pID_TEXT_TIME;
	ControlText*		m_pID_TEXT_LX;
	ControlButton*	    m_pID_BUTTON_CKM;
public:
    CUI_ID_FRAME_ActivityDay();
	bool OnFrameRun();
	bool OnFrameRender();

	bool ID_BUTTON_CLOSEOnButtonClick( ControlObject* pSender );
	void ID_CHECKBOX_ActivityOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_UnderGroundOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_CountryOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_GuildOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_MoneyOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_QuestOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
    void ID_CHECKBOX_OfficialOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );

	bool ID_BUTTON_WeekActivityOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_PageUpOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_PageDownOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_LastOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_NextOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_ActivityTrackOnButtonClick( ControlObject* pSender );
	void ID_CHECKBOX_ActivityDayOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
	void ID_CHECKBOX_ActivityMonthOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
	bool ID_BUTTON_CKMOnButtonClick( ControlObject* pSender );

	bool _LoadUI();				        // ÔØÈëUI
	bool DoControlConnect();	        // ¹ØÁ¬¿Ø¼þ
	bool _UnLoadUI();			        // Ð¶ÔØUI
	bool _IsVisable();			        // ÊÇ·ñ¿É¼û
	void _SetVisable( const bool bVisable );			// ÉèÖÃÊÇ·ñ¿ÉÊÓ

    void Refresh();                                                     // ¸üÐÂ½çÃæ
    void ClassifyActivities( const std::vector<Event*>& eventVec );     // ½«»î¶¯±í·ÖÀà
    void UpdateCurrentAct();                                            // ¸ù¾Ýµ±Ç°Ìõ¼þÉ¾Ñ¡»î¶¯
    bool ShowAndPitchByName( int nCategory, const char* pEvenName );    // Ìá¹©¸øÍË³öÓÎÏ·»î¶¯ÌáÐÑµÄ½Ó¿Ú£¬¸ºÔðÏÔÊ¾²¢¶¨Î»
    static bool SortByNeedLevel( const Event& v1, const Event& v2 );    // °´µÈ¼¶ÅÅÐò

	int  GetCurrentActivity(const char* pEventName,const std::vector<Event>& actVec);
	void UpdateEventList(int nIndex,const std::vector<Event>& actVec);
	void SetEventName(const Event& InfoEvent,int nIndex);
	void SetEventInfo(const Event& InfoEvent);

public:
	static bool ActivetyEvent( ControlObject* pSender );

protected:
    void ResetMembers();
    static void OnVisibleChange( ControlObject* pUIObject );
    const std::vector<Event>& GetListByCategory( TodayActType eType );      
    void GoButtonClickById( int nId );
    void AddEventToList( Event* pEvent, std::vector<Event>& actVec );

private:
    TodayActType            m_eCurrentType;         // µ±Ç°Ñ¡ÖÐÀà±ð
    int                     m_nCurrentPage;         // µ±Ç°ÏÔÊ¾Ò³

    std::vector<Event>      m_activityVec;          // »î¶¯
    std::vector<Event>      m_ectypeVec;            // ¸±±¾
    std::vector<Event>      m_countryVec;           // ¹ú¼Ò
    std::vector<Event>      m_guildVec;             // ¹«»á
    std::vector<Event>      m_taskVec;              // ÈÎÎñ
    std::vector<Event>      m_salaryVec;            // ÙºÂ»

    // µ±Ç°
    std::vector<Event>      m_curActivityVec;
    std::vector<Event>      m_curEctypeVec;
    std::vector<Event>      m_curCountryVec;
    std::vector<Event>      m_curGuildVec;
    std::vector<Event>      m_curTaskVec;
    std::vector<Event>      m_curSalaryVec;

	//ËùÓÐÈÎÎñ
	std::vector<Event>      m_todayVec;

};

extern CUI_ID_FRAME_ActivityDay s_CUI_ID_FRAME_ActivityDay;
