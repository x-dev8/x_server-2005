/********************************************************************
Created by UIEditor.exe
FileName: C:\Documents and Settings\huwen\×ÀÃæ\Shop.h
*********************************************************************/
#pragma once
#include "MeUi/MeUi.h"
#include "MessageDefine.h"
#include "BuyBackPack.h"

#ifndef ID_FRAME_SHOP
#define ID_FRAME_SHOP		"ID_FRAME_SHOP"
#endif  ID_FRAME_SHOP
#ifndef ID_PICTURE_Di1
#define ID_PICTURE_Di1		"ID_PICTURE_Di1"
#endif  ID_PICTURE_Di1
#ifndef ID_PICTURE_Shop1
#define ID_PICTURE_Shop1		"ID_PICTURE_Shop1"
#endif  ID_PICTURE_Shop1
#ifndef ID_PICTURE_Shop2
#define ID_PICTURE_Shop2		"ID_PICTURE_Shop2"
#endif  ID_PICTURE_Shop2
#ifndef ID_PICTURE_Shop3
#define ID_PICTURE_Shop3		"ID_PICTURE_Shop3"
#endif  ID_PICTURE_Shop3
#ifndef ID_PICTURE_Shop4
#define ID_PICTURE_Shop4		"ID_PICTURE_Shop4"
#endif  ID_PICTURE_Shop4
#ifndef ID_PICTURE_Shop5
#define ID_PICTURE_Shop5		"ID_PICTURE_Shop5"
#endif  ID_PICTURE_Shop5
#ifndef ID_PICTURE_Shop6
#define ID_PICTURE_Shop6		"ID_PICTURE_Shop6"
#endif  ID_PICTURE_Shop6
#ifndef ID_PICTURE_Shop11
#define ID_PICTURE_Shop11		"ID_PICTURE_Shop11"
#endif  ID_PICTURE_Shop11
#ifndef ID_PICTURE_Shop12
#define ID_PICTURE_Shop12		"ID_PICTURE_Shop12"
#endif  ID_PICTURE_Shop12
#ifndef ID_PICTURE_Shop13
#define ID_PICTURE_Shop13		"ID_PICTURE_Shop13"
#endif  ID_PICTURE_Shop13
#ifndef ID_PICTURE_Shop14
#define ID_PICTURE_Shop14		"ID_PICTURE_Shop14"
#endif  ID_PICTURE_Shop14
#ifndef ID_PICTURE_Shop15
#define ID_PICTURE_Shop15		"ID_PICTURE_Shop15"
#endif  ID_PICTURE_Shop15
#ifndef ID_PICTURE_Shop16
#define ID_PICTURE_Shop16		"ID_PICTURE_Shop16"
#endif  ID_PICTURE_Shop16
#ifndef ID_PICTURE_TitleDi
#define ID_PICTURE_TitleDi		"ID_PICTURE_TitleDi"
#endif  ID_PICTURE_TitleDi
#ifndef ID_BUTTON_help
#define ID_BUTTON_help		"ID_BUTTON_help"
#endif  ID_BUTTON_help
#ifndef ID_BUTTON_CLOSE
#define ID_BUTTON_CLOSE		"ID_BUTTON_CLOSE"
#endif  ID_BUTTON_CLOSE
#ifndef ID_BUTTON_mend
#define ID_BUTTON_mend		"ID_BUTTON_mend"
#endif  ID_BUTTON_mend
#ifndef ID_TEXT_Name
#define ID_TEXT_Name		"ID_TEXT_Name"
#endif  ID_TEXT_Name
#ifndef ID_BUTTON_mend2
#define ID_BUTTON_mend2		"ID_BUTTON_mend2"
#endif  ID_BUTTON_mend2
#ifndef ID_TEXT_Name1
#define ID_TEXT_Name1		"ID_TEXT_Name1"
#endif  ID_TEXT_Name1
#ifndef ID_TEXT_Price1
#define ID_TEXT_Price1		"ID_TEXT_Price1"
#endif  ID_TEXT_Price1
#ifndef ID_TEXT_Name3
#define ID_TEXT_Name3		"ID_TEXT_Name3"
#endif  ID_TEXT_Name3
#ifndef ID_TEXT_Price3
#define ID_TEXT_Price3		"ID_TEXT_Price3"
#endif  ID_TEXT_Price3
#ifndef ID_TEXT_Name5
#define ID_TEXT_Name5		"ID_TEXT_Name5"
#endif  ID_TEXT_Name5
#ifndef ID_TEXT_Price5
#define ID_TEXT_Price5		"ID_TEXT_Price5"
#endif  ID_TEXT_Price5
#ifndef ID_TEXT_Name7
#define ID_TEXT_Name7		"ID_TEXT_Name7"
#endif  ID_TEXT_Name7
#ifndef ID_TEXT_Price7
#define ID_TEXT_Price7		"ID_TEXT_Price7"
#endif  ID_TEXT_Price7
#ifndef ID_TEXT_Name9
#define ID_TEXT_Name9		"ID_TEXT_Name9"
#endif  ID_TEXT_Name9
#ifndef ID_TEXT_Price9
#define ID_TEXT_Price9		"ID_TEXT_Price9"
#endif  ID_TEXT_Price9
#ifndef ID_TEXT_Name11
#define ID_TEXT_Name11		"ID_TEXT_Name11"
#endif  ID_TEXT_Name11
#ifndef ID_TEXT_Price11
#define ID_TEXT_Price11		"ID_TEXT_Price11"
#endif  ID_TEXT_Price11
#ifndef ID_TEXT_Name2
#define ID_TEXT_Name2		"ID_TEXT_Name2"
#endif  ID_TEXT_Name2
#ifndef ID_TEXT_Price2
#define ID_TEXT_Price2		"ID_TEXT_Price2"
#endif  ID_TEXT_Price2
#ifndef ID_TEXT_Name4
#define ID_TEXT_Name4		"ID_TEXT_Name4"
#endif  ID_TEXT_Name4
#ifndef ID_TEXT_Price4
#define ID_TEXT_Price4		"ID_TEXT_Price4"
#endif  ID_TEXT_Price4
#ifndef ID_TEXT_Name6
#define ID_TEXT_Name6		"ID_TEXT_Name6"
#endif  ID_TEXT_Name6
#ifndef ID_TEXT_Price6
#define ID_TEXT_Price6		"ID_TEXT_Price6"
#endif  ID_TEXT_Price6
#ifndef ID_TEXT_Name8
#define ID_TEXT_Name8		"ID_TEXT_Name8"
#endif  ID_TEXT_Name8
#ifndef ID_TEXT_Price8
#define ID_TEXT_Price8		"ID_TEXT_Price8"
#endif  ID_TEXT_Price8
#ifndef ID_TEXT_Name10
#define ID_TEXT_Name10		"ID_TEXT_Name10"
#endif  ID_TEXT_Name10
#ifndef ID_TEXT_Price10
#define ID_TEXT_Price10		"ID_TEXT_Price10"
#endif  ID_TEXT_Price10
#ifndef ID_TEXT_Name12
#define ID_TEXT_Name12		"ID_TEXT_Name12"
#endif  ID_TEXT_Name12
#ifndef ID_TEXT_Price12
#define ID_TEXT_Price12		"ID_TEXT_Price12"
#endif  ID_TEXT_Price12
#ifndef ID_TEXT_Page
#define ID_TEXT_Page		"ID_TEXT_Page"
#endif  ID_TEXT_Page
#ifndef ID_CHECKBOX_Goumai
#define ID_CHECKBOX_Goumai		"ID_CHECKBOX_Goumai"
#endif  ID_CHECKBOX_Goumai
#ifndef ID_CHECKBOX_Gouhui
#define ID_CHECKBOX_Gouhui		"ID_CHECKBOX_Gouhui"
#endif  ID_CHECKBOX_Gouhui
#ifndef ID_BUTTON_Pageup
#define ID_BUTTON_Pageup		"ID_BUTTON_Pageup"
#endif  ID_BUTTON_Pageup
#ifndef ID_BUTTON_Pagedown
#define ID_BUTTON_Pagedown		"ID_BUTTON_Pagedown"
#endif  ID_BUTTON_Pagedown
#ifndef ID_LISTIMG_SHOP
#define ID_LISTIMG_SHOP		"ID_LISTIMG_SHOP"
#endif  ID_LISTIMG_SHOP
#ifndef ID_LISTIMG_SHOP2
#define ID_LISTIMG_SHOP2		"ID_LISTIMG_SHOP2"
#endif  ID_LISTIMG_SHOP2
#ifndef ID_PICTURE_20587
#define ID_PICTURE_20587		"ID_PICTURE_20587"
#endif  ID_PICTURE_20587
#ifndef ID_TEXT_19147
#define ID_TEXT_19147		"ID_TEXT_19147"
#endif  ID_TEXT_19147
#ifndef ID_TEXT_ExploitZ
#define ID_TEXT_ExploitZ		"ID_TEXT_ExploitZ"
#endif  ID_TEXT_ExploitZ
#ifndef ID_TEXT_ReputationZ
#define ID_TEXT_ReputationZ		"ID_TEXT_ReputationZ"
#endif  ID_TEXT_ReputationZ
#ifndef ID_TEXT_PrestigeZ
#define ID_TEXT_PrestigeZ		"ID_TEXT_PrestigeZ"
#endif  ID_TEXT_PrestigeZ
#ifndef ID_TEXT_GuildofferZ
#define ID_TEXT_GuildofferZ		"ID_TEXT_GuildofferZ"
#endif  ID_TEXT_GuildofferZ
#ifndef ID_TEXT_CopperBrandZ
#define ID_TEXT_CopperBrandZ		"ID_TEXT_CopperBrandZ"
#endif  ID_TEXT_CopperBrandZ
#ifndef ID_TEXT_BlackBrandZ
#define ID_TEXT_BlackBrandZ		"ID_TEXT_BlackBrandZ"
#endif  ID_TEXT_BlackBrandZ
#ifndef ID_TEXT_GoldBrandZ
#define ID_TEXT_GoldBrandZ		"ID_TEXT_GoldBrandZ"
#endif  ID_TEXT_GoldBrandZ
#ifndef ID_TEXT_Exploit
#define ID_TEXT_Exploit		"ID_TEXT_Exploit"
#endif  ID_TEXT_Exploit
#ifndef ID_TEXT_Reputation
#define ID_TEXT_Reputation		"ID_TEXT_Reputation"
#endif  ID_TEXT_Reputation
#ifndef ID_TEXT_Prestige
#define ID_TEXT_Prestige		"ID_TEXT_Prestige"
#endif  ID_TEXT_Prestige
#ifndef ID_TEXT_Guildoffer
#define ID_TEXT_Guildoffer		"ID_TEXT_Guildoffer"
#endif  ID_TEXT_Guildoffer
#ifndef ID_TEXT_CopperBrand
#define ID_TEXT_CopperBrand		"ID_TEXT_CopperBrand"
#endif  ID_TEXT_CopperBrand
#ifndef ID_TEXT_BlackBrand
#define ID_TEXT_BlackBrand		"ID_TEXT_BlackBrand"
#endif  ID_TEXT_BlackBrand
#ifndef ID_TEXT_GoldBrand
#define ID_TEXT_GoldBrand		"ID_TEXT_GoldBrand"
#endif  ID_TEXT_GoldBrand
#ifndef ID_PICTURE_ExploitTip
#define ID_PICTURE_ExploitTip		"ID_PICTURE_ExploitTip"
#endif  ID_PICTURE_ExploitTip
#ifndef ID_PICTURE_ReputationTip
#define ID_PICTURE_ReputationTip		"ID_PICTURE_ReputationTip"
#endif  ID_PICTURE_ReputationTip
#ifndef ID_PICTURE_PrestigeTip
#define ID_PICTURE_PrestigeTip		"ID_PICTURE_PrestigeTip"
#endif  ID_PICTURE_PrestigeTip
#ifndef ID_PICTURE_GuildofferTip
#define ID_PICTURE_GuildofferTip		"ID_PICTURE_GuildofferTip"
#endif  ID_PICTURE_GuildofferTip
#ifndef ID_PICTURE_CopperBrandTip
#define ID_PICTURE_CopperBrandTip		"ID_PICTURE_CopperBrandTip"
#endif  ID_PICTURE_CopperBrandTip
#ifndef ID_PICTURE_BlackBrandTip
#define ID_PICTURE_BlackBrandTip		"ID_PICTURE_BlackBrandTip"
#endif  ID_PICTURE_BlackBrandTip
#ifndef ID_PICTURE_BattleBrandTip
#define ID_PICTURE_BattleBrandTip		"ID_PICTURE_BattleBrandTip"
#endif  ID_PICTURE_BattleBrandTip
#ifndef ID_TEXT_BattleBrandZ
#define ID_TEXT_BattleBrandZ		"ID_TEXT_BattleBrandZ"
#endif  ID_TEXT_BattleBrandZ
#ifndef ID_TEXT_BattleBrand
#define ID_TEXT_BattleBrand		"ID_TEXT_BattleBrand"
#endif  ID_TEXT_BattleBrand
#ifndef ID_PICTURE_GoldBrandTip
#define ID_PICTURE_GoldBrandTip		"ID_PICTURE_GoldBrandTip"
#endif  ID_PICTURE_GoldBrandTip
#ifndef ID_TEXT_MoneyZ
#define ID_TEXT_MoneyZ		"ID_TEXT_MoneyZ"
#endif  ID_TEXT_MoneyZ
#ifndef ID_TEXT_Money
#define ID_TEXT_Money		"ID_TEXT_Money"
#endif  ID_TEXT_Money
#ifndef ID_TEXT_Lock1
#define ID_TEXT_Lock1		"ID_TEXT_Lock1"
#endif  ID_TEXT_Lock1
#ifndef ID_TEXT_Lock2
#define ID_TEXT_Lock2		"ID_TEXT_Lock2"
#endif  ID_TEXT_Lock2
#ifndef ID_TEXT_Lock3
#define ID_TEXT_Lock3		"ID_TEXT_Lock3"
#endif  ID_TEXT_Lock3
#ifndef ID_TEXT_Lock4
#define ID_TEXT_Lock4		"ID_TEXT_Lock4"
#endif  ID_TEXT_Lock4
#ifndef ID_TEXT_Lock5
#define ID_TEXT_Lock5		"ID_TEXT_Lock5"
#endif  ID_TEXT_Lock5
#ifndef ID_TEXT_Lock6
#define ID_TEXT_Lock6		"ID_TEXT_Lock6"
#endif  ID_TEXT_Lock6
#ifndef ID_TEXT_Lock7
#define ID_TEXT_Lock7		"ID_TEXT_Lock7"
#endif  ID_TEXT_Lock7
#ifndef ID_TEXT_Lock8
#define ID_TEXT_Lock8		"ID_TEXT_Lock8"
#endif  ID_TEXT_Lock8
#ifndef ID_TEXT_Lock9
#define ID_TEXT_Lock9		"ID_TEXT_Lock9"
#endif  ID_TEXT_Lock9
#ifndef ID_TEXT_Lock10
#define ID_TEXT_Lock10		"ID_TEXT_Lock10"
#endif  ID_TEXT_Lock10
#ifndef ID_TEXT_CurrentMoney
#define ID_TEXT_CurrentMoney		"ID_TEXT_CurrentMoney"
#endif  ID_TEXT_CurrentMoney
#ifndef ID_BUTTON_Active
#define ID_BUTTON_Active		"ID_BUTTON_Active"
#endif  ID_BUTTON_Active

#ifndef ID_LISTIMG_SHOP11111
#define ID_LISTIMG_SHOP11111		"ID_LISTIMG_SHOP11111"
#endif  ID_LISTIMG_SHOP11111


#include "UiBase.h"

struct TempTransferStruct 
{
	TempTransferStruct()
	{
		m_nId = 0;
		m_nType = 0;
        m_bNeedJiaozi = true;
	}
	unsigned short m_nId;
	unsigned char  m_nType;
    bool           m_bNeedJiaozi;
};


class CUI_ID_FRAME_SHOP :public CUIBase
{
	// Member
private:	
	void ResetMembers();
	ControlFrame*	m_pID_FRAME_SHOP;
	//ControlPicture*	m_pID_PICTURE_Di1;
	ControlListImage*	m_pID_LISTIMG_SHOP;
	 ControlPicture*	m_pID_PICTURE_Shop1;
	 ControlPicture*	m_pID_PICTURE_Shop2;
	 ControlPicture*	m_pID_PICTURE_Shop3;
	 ControlPicture*	m_pID_PICTURE_Shop4;
	 ControlPicture*	m_pID_PICTURE_Shop5;
	 ControlPicture*	m_pID_PICTURE_Shop6;
	 ControlPicture*	m_pID_PICTURE_Shop11;
	 ControlPicture*	m_pID_PICTURE_Shop12;
	 ControlPicture*	m_pID_PICTURE_Shop13;
	 ControlPicture*	m_pID_PICTURE_Shop14;
	 ControlPicture*	m_pID_PICTURE_Shop15;
	 ControlPicture*	m_pID_PICTURE_Shop16;
// 	ControlPicture*	m_pID_PICTURE_TitleDi;
// 	ControlButton*	m_pID_BUTTON_help;
	ControlButton*	m_pID_BUTTON_CLOSE;
	ControlButton*	m_pID_BUTTON_mend;
	/*ControlText*	m_pID_TEXT_Name;*/
	ControlButton*	m_pID_BUTTON_mend2;
	 ControlText*	m_pID_TEXT_Name1;
	
	 ControlText*	m_pID_TEXT_Name3;
	 
	 ControlText*	m_pID_TEXT_Name5;
	 
	 ControlText*	m_pID_TEXT_Name7;
	 ControlText*	m_pID_TEXT_Name9;
	
	 ControlText*	m_pID_TEXT_Name11;
	 
	 ControlText*	m_pID_TEXT_Name2;
	 
	 ControlText*	m_pID_TEXT_Name4;
	 
	 ControlText*	m_pID_TEXT_Name6;
	 
	 ControlText*	m_pID_TEXT_Name8;
	 
	 ControlText*	m_pID_TEXT_Name10;
	 
	 ControlText*	m_pID_TEXT_Name12;
	 
	ControlListImage*	m_pID_LISTIMG_SHOP2;
	ControlButton*	m_pID_BUTTON_Pagedown;
	ControlButton*	m_pID_BUTTON_Pageup;
	
	ControlText*	m_pID_TEXT_Price1;
	ControlText*	m_pID_TEXT_Price3;
	ControlText*	m_pID_TEXT_Price5;
	ControlText*	m_pID_TEXT_Price7;
	ControlText*	m_pID_TEXT_Price9;
	/*ControlText*	m_pID_TEXT_Price11;*/
	ControlText*	m_pID_TEXT_Price2;
	ControlText*	m_pID_TEXT_Price4;
	ControlText*	m_pID_TEXT_Price6;
	ControlText*	m_pID_TEXT_Price8;
	ControlText*	m_pID_TEXT_Price10;
	/*ControlText*	m_pID_TEXT_Price12;*/
	ControlGroup m_PriceGroup;

	ControlText*	m_pID_TEXT_Lock1;
	ControlText*	m_pID_TEXT_Lock2;
	ControlText*	m_pID_TEXT_Lock3;
	ControlText*	m_pID_TEXT_Lock4;
	ControlText*	m_pID_TEXT_Lock5;
	ControlText*	m_pID_TEXT_Lock6;
	ControlText*	m_pID_TEXT_Lock7;
	ControlText*	m_pID_TEXT_Lock8;
	ControlText*	m_pID_TEXT_Lock9;
	ControlText*	m_pID_TEXT_Lock10;
	ControlButton*	m_pID_BUTTON_Active;
	ControlGroup   m_LockGroup;
	ControlText*	m_pID_TEXT_CurrentMoney;
	std::vector<ControlText*> m_vctLock;

	ControlText*	m_pID_TEXT_Page;
	ControlCheckBox*	m_pID_CHECKBOX_Goumai;
	ControlCheckBox*	m_pID_CHECKBOX_Gouhui;

	static const int ELEMENT_COUNT = 10;
	ControlText*	m_pNameText[ELEMENT_COUNT];
	ControlText*	m_pPriceText[ELEMENT_COUNT];


public:
	CUI_ID_FRAME_SHOP();
	// Frame
	bool OnFrameRun();
	bool OnFrameRender();
	bool ID_LISTIMG_SHOPOnIconDragOn( ControlObject* pSender, ControlObject* pMe, ControlIconDrag::S_ListImg* pItemDrag, ControlIconDrag::S_ListImg* pItemSrc );
	bool ID_LISTIMG_SHOPOnIconLDBClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_SHOPOnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_SHOPOnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	//bool ID_BUTTON_helpOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_CLOSEOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_mendOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_mend2OnButtonClick( ControlObject* pSender );
	bool ID_LISTIMG_SHOP2OnIconDragOn( ControlObject* pSender, ControlObject* pMe, ControlIconDrag::S_ListImg* pItemDrag, ControlIconDrag::S_ListImg* pItemSrc );
	bool ID_LISTIMG_SHOP2OnIconLDBClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_SHOP2OnIconButtonClick( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_LISTIMG_SHOP2OnIconRButtonUp( ControlObject* pSender, ControlIconDrag::S_ListImg* pItem );
	bool ID_BUTTON_PagedownOnButtonClick( ControlObject* pSender );
	bool ID_BUTTON_PageupOnButtonClick( ControlObject* pSender );
	void ID_CHECKBOX_GoumaiOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
	void ID_CHECKBOX_GouhuiOnCheckBoxCheck( ControlObject* pSender, bool* pbChecked  );
	bool ID_BUTTON_ActiveOnButtonClick( ControlObject* pSender );
	
	void SellItem(ControlObject* pSender, ControlIconDrag::S_ListImg* pItemDrag);
private:
	virtual bool _LoadUI();				// ÔØÈëUI
	bool DoControlConnect();	// ¹ØÁ¬¿Ø¼þ
	virtual bool _UnLoadUI();			// Ð¶ÔØUI
	virtual bool _IsVisable();			// ÊÇ·ñ¿É¼û
	virtual void _SetVisable( const bool bVisable );			// ÉèÖÃÊÇ·ñ¿ÉÊÓ

public:
	struct ItemCost
	{
		int nId;		// ID
		int nCost;		// ¼Û¸ñ
		int nPerCount;	// Ã¿´ÎÊÕ¹ºµÄ×î¶àÊýÁ¿
	};
	struct ShopData
	{
		enum
		{
			eMaxItem = MsgAckGetShop::eMaxItem
		};
		ShopData()
		{
			nCount = 0;
		}

		void Clear()
		{
			byType = 0;
			nCount = 0;	
			memset(nIds, 0, sizeof(nIds));
			memset(nGuids, 0, sizeof(nIds));
			memset(dwSellPrices, 0, sizeof(dwSellPrices));
			memset(dwBuyPrices, 0, sizeof(dwBuyPrices));
			memset(nBuyCounts, 0, sizeof(nBuyCounts));
			memset(nPackIndex, 0, sizeof(nPackIndex));
			memset(nCounts, 0, sizeof(nCounts));
			memset(bIsBound, 0, sizeof(bIsBound));
		}
	

		ShopData& operator=(const MsgAckGetShop& v)
		{
			byType = v.byType;
			memcpy(nIds, v.nIds, sizeof(nIds));
			memset(nGuids, 0, sizeof(nIds));
			memcpy(dwSellPrices, v.dwSellPrices, sizeof(dwSellPrices));
			memcpy(dwBuyPrices, v.dwBuyPrices, sizeof(dwBuyPrices));
			memcpy(nBuyCounts, v.nBuyCounts, sizeof(nBuyCounts));
			for (int i = 0; i < eMaxItem; ++i)
				nCounts[i] = 1;
			memset(nPackIndex, 0, sizeof(nPackIndex));
			memcpy(bIsBound, v.bIsItemBound, sizeof(bIsBound));
			nCount = v.nCount;	
			return *this;
		}

		BYTE byType;
		unsigned short nIds[eMaxItem];
		__int64 nGuids[eMaxItem];
		short nCounts[eMaxItem];
		DWORD dwSellPrices[eMaxItem];   // ³öÊÛ¼Û¸ñ
		DWORD dwBuyPrices[eMaxItem];    // ÊÕ¹º¼Û¸ñ
		short nBuyCounts[eMaxItem];     // Ã¿´Î×î¶àÄÜ³öÊÛµÄÊýÁ¿
		int nPackIndex[eMaxItem];		// ¹º»Ø±³°üË÷Òý
		bool bIsBound[eMaxItem];		// ÊÇ·ñ°ó¶¨£¬Ö»ÔÚËæÉíÉÌµêÓÃ
		short nCount;
	};

	ControlFrame* GetFrame() { return m_pID_FRAME_SHOP; }
	void SetRepair(bool v);
	ItemCost* GetItemCost(int nId);
	
	BuyBackPack<SCharItem>& GetBuyBackPack() { return m_BuyBackPack; }
	bool GetRepair() { return m_bRepair; }

	bool CHECKBOX_Goumai_IsChecked();
	bool CHECKBOX_Gouhui_IsChecked();
	bool BuyBack(ControlIconDrag::S_ListImg *pItem);
	bool IsList(const ControlObject* pObject);
	void RepairEquip(int index);
	void Refresh(MsgAckGetShop* pMsg);
	void EnableShopItem();

	static bool UIShop_BuyGoods(int num, void *pData);
	static bool UIShop_BuyGoodsByCount(const char* szInputData, void *pData );

	void ToggleReturnBuyFrame();
	DWORD GetItemSellPrice( int nID );

	void ClearBuyBackPack();

	void UpdateMyInfo();
    bool IsBoundShop();             // ÊÇ·ñÎª°ó¶¨ÉÌµê£¬ÓÃÒÔÇø·Ö½ðÇ®ÉÌµê»¹ÊÇ½»×ÓÉÌµê (2¸çµÄÂß¼­)

	bool IsRemoteClose(){return m_bRemoteClose;}
	void SetRemoteClose(bool value){m_bRemoteClose = value;}
	void SetNpcID(int ID){m_nNpcId = ID;}
private:
	bool m_bRemoteClose;			//Õâ¸ö×Ö¶ÎÔÚËæÉíÉÌµêÖÐÊ¹ÓÃ£¬m_bRemoteClose=true±íÊ¾¾ÖÀïÌ«Ô¶µÄÊ±ºò¹Ø±ÕÉÌµê£¬false±íÊ¾ÕâÊÇËæÉíÉÌµê
	void TogglePage(int nPage);

	bool BuyItems(ControlIconDrag::S_ListImg* pItem);

	std::vector<ItemCost> m_vtItemCost;

	ShopData m_shopData;
	ShopData m_buyShopData;
	ShopData* m_pCurrentShopData;

	int m_nPageNum;
	int m_nCurrPage;

	int m_nNpcId;

	BuyBackPack<SCharItem> m_BuyBackPack;

	bool m_bRepair;

	void RepairPack(int index);

	void ToggleBuyFrame();

	void UpdateIconInfo();

private:
	static bool m_bGuildShop;
	static int m_nGuildShoplevel;
	void RefreshGuildShopData();
	/*void ToggleBuyFrameForGuild();*/
	void SetGuildShopActived();
	void SetLockText(int, int);
	
public:
	void SetGuildShop(int nLevel);
	void RefreshGuildShop();
	void UpdataCurrentMoney();
	bool GetIsGuildShop(){return m_bGuildShop;}
private:
    bool m_bBound;              // ´ËÉÌµê³öÊÛµÄÊÇ·ñÎª°ó¶¨ÎïÆ·

};
extern CUI_ID_FRAME_SHOP s_CUI_ID_FRAME_SHOP;